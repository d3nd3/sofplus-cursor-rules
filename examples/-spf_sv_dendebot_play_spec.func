// SoFplus

// ---------------------------------------------------------------------------
// DendeBot detection by switching players between player / spectator modes
// ---------------------------------------------------------------------------


//
// Init
//
function spf_sv_dendebot_play_spec_init()
{
  sp_sc_func_exec spf_sc_list_add_func _sp_sv_on_client_begin "spf_sv_dendebot_play_spec_on_client_begin"
}


//
// Swap when a player enters
//
function spf_sv_dendebot_play_spec_on_client_begin( ~par_slot )
{
  sp_sv_info_client #~par_slot

  sp_sc_flow_if number cvar _sp_sv_info_client_spectator == val 1
  {
    sp_sv_client_play #~par_slot :-X
    sp_sc_cvar_sset ~cmd "sp_sv_client_spec " #~par_slot " :-X"
  }
  else
  {
    sp_sv_client_spec #~par_slot :-X
    sp_sc_cvar_sset ~cmd "sp_sv_client_play " #~par_slot " :-X"
  }

  // Swap back
  sp_sc_timer 1000 #~cmd
}
